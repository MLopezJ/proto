{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://github.com/bifravst/nRF.guide-proto/blob/saga/generate/types/envelope.schema.json",
  "title": "Envelope schema for nRF Cloud application messages",
  "description": "All messages received from nRF Cloud via MQTT are wrapped in this envelope",
  "type": "object",
  "properties": {
    "sender": {
      "type": "string",
      "minLength": 1
    },
    "topic": {
      "type": "string",
      "minLength": 1
    },
    "payload": {
      "oneOf": [
        {
          "$ref": "https://raw.githubusercontent.com/nRFCloud/application-protocols/v1/schemas/cloudToDevice/agps/agps.json"
        },
        {
          "$ref": "https://raw.githubusercontent.com/nRFCloud/application-protocols/v1/schemas/cloudToDevice/air_quality/air_quality.json"
        },
        {
          "$ref": "https://raw.githubusercontent.com/nRFCloud/application-protocols/v1/schemas/cloudToDevice/cell_position/cell-position.json"
        },
        {
          "$ref": "https://raw.githubusercontent.com/nRFCloud/application-protocols/v1/schemas/cloudToDevice/device/device.json"
        },
        {
          "$ref": "https://raw.githubusercontent.com/nRFCloud/application-protocols/v1/schemas/cloudToDevice/env/env.json"
        },
        {
          "$ref": "https://raw.githubusercontent.com/nRFCloud/application-protocols/v1/schemas/cloudToDevice/gps/gps.json"
        },
        {
          "$ref": "https://raw.githubusercontent.com/nRFCloud/application-protocols/v1/schemas/cloudToDevice/ground_fix/ground-fix.json"
        },
        {
          "$ref": "https://raw.githubusercontent.com/nRFCloud/application-protocols/v1/schemas/cloudToDevice/led/led.json"
        },
        {
          "$ref": "https://raw.githubusercontent.com/nRFCloud/application-protocols/v1/schemas/cloudToDevice/light/light.json"
        },
        {
          "$ref": "https://raw.githubusercontent.com/nRFCloud/application-protocols/v1/schemas/cloudToDevice/modem/modem.json"
        },
        {
          "$ref": "https://raw.githubusercontent.com/nRFCloud/application-protocols/v1/schemas/cloudToDevice/pgps-error/pgps.json"
        },
        {
          "$ref": "https://raw.githubusercontent.com/nRFCloud/application-protocols/v1/schemas/cloudToDevice/single_cell/single-cell.json"
        },
        {
          "$ref": "https://raw.githubusercontent.com/nRFCloud/application-protocols/v1/schemas/cloudToDevice/temp/temp.json"
        },
        {
          "$ref": "https://raw.githubusercontent.com/nRFCloud/application-protocols/v1/schemas/cloudToDevice/wifi/wifi-position.json"
        },
        {
          "$ref": "https://raw.githubusercontent.com/nRFCloud/application-protocols/v1/schemas/deviceToCloud/agps/agps.json"
        },
        {
          "$ref": "https://raw.githubusercontent.com/nRFCloud/application-protocols/v1/schemas/deviceToCloud/air_press/air_press.json"
        },
        {
          "$ref": "https://raw.githubusercontent.com/nRFCloud/application-protocols/v1/schemas/deviceToCloud/air_quality/air_quality.json"
        },
        {
          "$ref": "https://raw.githubusercontent.com/nRFCloud/application-protocols/v1/schemas/deviceToCloud/button/button.json"
        },
        {
          "$ref": "https://raw.githubusercontent.com/nRFCloud/application-protocols/v1/schemas/deviceToCloud/cell_position/cell-position.json"
        },
        {
          "$ref": "https://raw.githubusercontent.com/nRFCloud/application-protocols/v1/schemas/deviceToCloud/device/device.json"
        },
        {
          "$ref": "https://raw.githubusercontent.com/nRFCloud/application-protocols/v1/schemas/deviceToCloud/flip/flip.json"
        },
        {
          "$ref": "https://raw.githubusercontent.com/nRFCloud/application-protocols/v1/schemas/deviceToCloud/gnss/gnss.json"
        },
        {
          "$ref": "https://raw.githubusercontent.com/nRFCloud/application-protocols/v1/schemas/deviceToCloud/ground_fix/ground-fix.json"
        },
        {
          "$ref": "https://raw.githubusercontent.com/nRFCloud/application-protocols/v1/schemas/deviceToCloud/humid/humid.json"
        },
        {
          "$ref": "https://raw.githubusercontent.com/nRFCloud/application-protocols/v1/schemas/deviceToCloud/light/light.json"
        },
        {
          "$ref": "https://raw.githubusercontent.com/nRFCloud/application-protocols/v1/schemas/deviceToCloud/pgps/pgps.json"
        },
        {
          "$ref": "https://raw.githubusercontent.com/nRFCloud/application-protocols/v1/schemas/deviceToCloud/rsrp/rsrp.json"
        },
        {
          "$ref": "https://raw.githubusercontent.com/nRFCloud/application-protocols/v1/schemas/deviceToCloud/single_cell/single-cell.json"
        },
        {
          "$ref": "https://raw.githubusercontent.com/nRFCloud/application-protocols/v1/schemas/deviceToCloud/temp/temp.json"
        },
        {
          "$ref": "https://raw.githubusercontent.com/nRFCloud/application-protocols/v1/schemas/deviceToCloud/wifi/wifi-position.json"
        }
      ]
    }
  },
  "required": ["sender", "topic", "payload"]
}
